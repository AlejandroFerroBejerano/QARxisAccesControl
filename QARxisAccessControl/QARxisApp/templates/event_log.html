{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
  EVENT LOG MONITOR
{% endblock %}

{% block head %}

{% endblock %}



{% block content %}
  <div id="pending_events">
    <!--
    <div class="panel-heading">
      <form>
        <div class="row">
          <a class="btn btn-success btn-sm col-sm-offset-10" ng-click="refresh()">
            <i class="fa fa-refresh fa-2x fa-spin-hover"></i>
            <label class="txt-btn">&nbsp;&nbsp;Refresh</label>
          </a>
        </div>
      </form>
    </div>
    -->
    DEBUG sort=[[currentSort]], dir=[[currentSortDir]]
    <div class="panel-body">
    <form>
        <div class="form-group">
          <div class="input">
              <input type="text" class="form-control" v-model="search" placeholder="Search by any parameters" v-model="search">
          </div>
        </div>
    </form>
    <table class="table table-bordered table-striped">

      <thead>
        <tr>
          <th class="center-td" >
            <a class="btn btn-td btn-default btn-sm" @click="sort('timestamp')" >
              <span>
                <i class="fa fa-1x fa-calendar">&nbsp;&nbsp;Date</i>
                <i class="fa fa-1x fa-arrow-circle-down" ></i>
              </span>
              <!--
              <span class="fa-x-reverse" v-show="sortKey == 'date' && !sortReverse">
                <i class="fa fa-1x fa-calendar">&nbsp;&nbsp;Date</i>
                <i class="fa fa-1x fa-arrow-circle-up"></i>
              </span>
              -->
            </a>
          </th>
          <td class="center-td">
            <a class="btn btn-td btn-default btn-sm" @click="sort('timestamp')" >
              <span>
                <i class="fa fa-1x fa-clock-o">&nbsp;&nbsp;Time</i>
                <i class="fa fa-1x fa-arrow-circle-down"></i>
              </span>
              <!--
              <span class="fa-x-reverse" v-show="sortKey == 'time' && !sortReverse">
                <i class="fa fa-1x fa-clock-o">&nbsp;&nbsp;Time</i>
                <i class="fa fa-1x fa-arrow-circle-up"></i>
              </span>
              -->
            </a>
          </td>
          <td class="center-td">
            <a class="btn btn-td btn-default btn-sm" @click="sort('hwid')" >
              <span>
                <i class="fa fa-1x fa-flag">&nbsp;&nbsp;HwId</i>
                <i class="fa fa-1x fa-arrow-circle-down" ></i>
              </span>
              <!--
              <span class="fa-x-reverse" v-show="sortKey == 'hwid' && !sortReverse">
                <i class="fa fa-1x fa-flag">&nbsp;&nbsp;Kind</i>
                <i class="fa fa-1x fa-arrow-circle-up"></i>
              </span>
              -->
            </a>
          </td>
          <td class="center-td">
            <a class="btn btn-td btn-default btn-sm" @click="sort('barcode')" >
              <span>
                <i class="fa fa-1x fa-bars">&nbsp;&nbsp;Barcode</i>
                <i class="fa fa-1x fa-arrow-circle-down"></i>
              </span>
              <!--
              <span class="fa-x-reverse" v-show="sortKey == 'description' && !sortReverse">
                <i class="fa fa-1x fa-bars">&nbsp;&nbsp;Description</i>
                <i class="fa fa-1x fa-arrow-circle-up"></i>
              </span>
              -->
            </a>
          </td>
          <!--
          <td class="center-td">
            <a class="btn btn-td btn-default btn-sm" ng-click="sortType = 'location'; sortReverse = !sortReverse">
              <span ng-hide="sortType == 'location' && !sortReverse">
                <i class="fa fa-1x fa-map-marker">&nbsp;&nbsp;Location</i>
                <i class="fa fa-1x fa-arrow-circle-down" ></i>
              </span>
              <span class="fa-x-reverse" ng-show="sortType == 'location' && !sortReverse">
                <i class="fa fa-1x fa-map-marker">&nbsp;&nbsp;Location</i>
                <i class="fa fa-1x fa-arrow-circle-up"></i>
              </span>
            </a>
          </td>
          <td class="center-td">
            <a class="btn btn-td btn-default btn-sm" ng-click="sortType = 'states'; sortReverse = !sortReverse">
              <span ng-hide="sortType == 'states' && !sortReverse">
                <i class="fa fa-1x  fa-thermometer-quarter">&nbsp;&nbsp;States</i>
                <i class="fa fa-1x fa-arrow-circle-down" ></i>
              </span>
              <span class="fa-x-reverse" ng-show="sortType == 'states' && !sortReverse">
                <i class="fa fa-1x  fa-thermometer-quarter">&nbsp;&nbsp;States</i>
                <i class="fa fa-1x fa-arrow-circle-up"></i>
              </span>
            </a>
          </td>
          <td class="center-td">
            <a class="btn btn-td btn-default btn-sm" ng-click="sortType = 'group'; sortReverse = !sortReverse">
              <span ng-hide="sortType == 'group' && !sortReverse">
                <i class="fa fa-1x  fa-object-group">&nbsp;&nbsp;Group</i>
                <i class="fa fa-1x fa-arrow-circle-down"></i>
              </span>
              <span class="fa-x-reverse" ng-show="sortType == 'group' && !sortReverse">
                <i class="fa fa-1x  fa-object-group">&nbsp;&nbsp;Group</i>
                <i class="fa fa-1x fa-arrow-circle-up"></i>
              </span>
            </a>
          </td>
          -->
        </tr>
      </thead>

      <tbody>
        <tr v-for="event in filteredEvents">
          <td>[[ getDate(event.timestamp) ]]</td>
          <td>[[ getTime(event.timestamp) ]]</td>
          <td>[[ event.hwid ]]</td>
          <td>[[ event.barcode ]]</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>


    <div v-show="events.length == 0 || !events " style="padding: 20px 20px">
        <div id="noEventAviable" class="panel panel-warning my-cloak">
          <div class="panel-heading" >
            <h3 class="panel-title">Events Unaviable</h3>
          </div>
        <div class="panel-body">
            <i>No events information aviable rigth now. Please, reload this page or wait a few minutes .</i>
        </div>
        </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.5"></script>
  <script src="{% static 'js/app.js' %}"></script>

{% endblock %}
